# ENEE408a_Web_LED
##Repository of MicroPython and C programs used in the University of Maryland ENEE408a "Web-LED" microprocessor capstone project for the Fall 2021 semester.

The WebLED project is essentially a voice-controlled smart LED grid through Google Assistant. The C files (located in `stm32_c`) are compiled and run on an STM32F446RE Nucleo board, and the MicroPython code (located in `esp32_micropython`) is compiled and run on an ESP32 board. Essentially, the ESP32 board handles Wifi related tasks and sends commands via UART to the STM32 board which drives the LEDs. We used IFTTT to create applets allowing us to build custom Google Assistant commands. These custom commands trigger web requests which change fields in a URL maintained by ThingSpeak, an IoT analytics platform. For example, the "LED on" command would cause a certain field to be set to 1, while "LED off" would set this field to 0. The same approach is used for changing the LED's colors. The MicroPython code on the ESP32 board creates a webserver using the MicroPython socket API, and constantly checks the ThingSpeak URL for changes to the aforementioned fields. If a change is detected, the webserver is updated to display the new status of the light (i.e. a color change), and a command is sent to the STM32 via UART to update the LED grid. The STM32 then receives this data, sets each pixel of the grid accordingly, and uses a PWM signal to set each LED of the WS2812B module. 

Note: If trying to use this code, pins may need to be changed to get it to work with your specific board(s). The setup of the STM32 (i.e. clock speed, PWM duty cycle settings, etc.) may differ for different variations of the STM32 family. 
